from pylons import c , g from r2 . lib . wrapped import Templated from pages import Reddit from r2 . lib . menus import NamedButton , NavButton , menu , NavMenu class AdminSidebar ( Templated ) : def __init__ ( self , user ) : Templated . __init__ ( self ) self . user = user class Details ( Templated ) : def __init__ ( self , link ) : Templated . __init__ ( self ) self . link = link class AdminPage ( Reddit ) : create_reddit_box = False submit_box = False extension_handling = False show_sidebar = False def __init__ ( self , nav_menus = None , * a , ** kw ) : if c . user_is_admin : buttons = [ ] if g . translator : buttons . append ( NavButton ( menu . i18n , "i18n" ) ) buttons . append ( NavButton ( menu . awards , "ads" ) ) buttons . append ( NavButton ( menu . awards , "awards" ) ) buttons . append ( NavButton ( menu . errors , "error log" ) ) buttons . append ( NavButton ( menu . usage , "usage stats" ) ) admin_menu = NavMenu ( buttons , title = 'show' , base_path = '/admin' , type = "lightdrop" ) if nav_menus : nav_menus . insert ( 0 , admin_menu ) else : nav_menus = [ admin_menu ] Reddit . __init__ ( self , nav_menus = nav_menus , * a , ** kw ) class AdminProfileMenu ( NavMenu ) : def __init__ ( self , path ) : NavMenu . __init__ ( self , [ ] , base_path = path , title = 'admin' , type = "tabdrop" ) try : from r2admin . lib . pages import * except ImportError : pass

from django . contrib import admin from cms . admin . placeholderadmin import PlaceholderAdmin from project . placeholderapp . models import * class MixinAdmin ( admin . ModelAdmin ) : def formfield_for_dbfield ( self , db_field , ** kwargs ) : request = kwargs . pop ( 'request' , None ) return super ( MixinAdmin , self ) . formfield_for_dbfield ( db_field , request = request , ** kwargs ) class Example1Admin ( PlaceholderAdmin , MixinAdmin ) : pass class Example2Admin ( PlaceholderAdmin ) : fieldsets = ( ( 'Placeholder + more fields' , { : ( 'wide' , ) , : ( 'char_1' , 'placeholder' , 'char_2' , ) } ) , ( 'Other fields' , { : ( 'wide' , ) , : ( 'char_3' , 'char_4' , ) } ) , ) class Example3Admin ( PlaceholderAdmin ) : fieldsets = ( ( 'Only chars' , { : ( 'wide' , ) , : ( 'char_1' , 'char_2' , ) } ) , ( u'Only Placeholder with rigth classes' , { : ( 'plugin-holder' , 'plugin-holder-nopage' , ) , : ( 'placeholder' , ) } ) , ( 'Only chars' , { : ( 'wide' , ) , : ( 'char_3' , 'char_4' , ) } ) , ) class Example4Admin ( PlaceholderAdmin ) : fieldsets = ( ( 'Only chars' , { : ( 'wide' , ) , : ( 'char_1' , 'char_2' , ) } ) , ( u'Only Placeholder, with wrong classes' , { : ( 'wide' , 'plugin-holder-nopage' , ) , : ( 'placeholder' , ) } ) , ( 'Only chars' , { : ( 'wide' , ) , : ( 'char_3' , 'char_4' , ) } ) , ) class Example5Admin ( PlaceholderAdmin ) : fieldsets = ( ( 'Only chars' , { : ( 'wide' , ) , : ( 'char_1' , 'char_2' , ) } ) , ( u'Two Placeholder, with right classes' , { : ( 'plugin' , 'plugin-holder-nopage' , ) , : ( 'placeholder_1' , 'placeholder_2' , ) } ) , ( 'Only chars' , { : ( 'wide' , ) , : ( 'char_3' , 'char_4' , ) } ) , ) admin . site . register ( Example1 , Example1Admin ) admin . site . register ( Example2 , Example2Admin ) admin . site . register ( Example3 , Example3Admin ) admin . site . register ( Example4 , Example4Admin ) admin . site . register ( Example5 , Example5Admin )

from optparse import make_option from django . core . management . base import BaseCommand , CommandError from django . db import connections , DEFAULT_DB_ALIAS class Command ( BaseCommand ) : help = ( "Runs the command-line client for specified database, or the " ) option_list = BaseCommand . option_list + ( make_option ( '--database' , action = 'store' , dest = 'database' , default = DEFAULT_DB_ALIAS , help = 'Nominates a database onto which to ' ) , ) requires_model_validation = False def handle ( self , ** options ) : connection = connections [ options . get ( 'database' ) ] try : connection . client . runshell ( ) except OSError : raise CommandError ( 'You appear not to have the %r program installed or on your path.' % connection . client . executable_name )

from functools import wraps from django . utils . cache import patch_vary_headers from django . utils . decorators import available_attrs def vary_on_headers ( * headers ) : def decorator ( func ) : @ wraps ( func , assigned = available_attrs ( func ) ) def inner_func ( * args , ** kwargs ) : response = func ( * args , ** kwargs ) patch_vary_headers ( response , headers ) return response return inner_func return decorator def vary_on_cookie ( func ) : @ wraps ( func , assigned = available_attrs ( func ) ) def inner_func ( * args , ** kwargs ) : response = func ( * args , ** kwargs ) patch_vary_headers ( response , ( 'Cookie' , ) ) return response return inner_func

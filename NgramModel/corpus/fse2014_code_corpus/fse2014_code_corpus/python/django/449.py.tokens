import warnings from django . test import TestCase class URLHandling ( TestCase ) : urls = 'regressiontests.views.generic_urls' redirect_target = "/%E4%B8%AD%E6%96%87/target/" def setUp ( self ) : self . save_warnings_state ( ) warnings . filterwarnings ( 'ignore' , category = DeprecationWarning , module = 'django.views.generic.simple' ) def tearDown ( self ) : self . restore_warnings_state ( ) def test_combining_redirect ( self ) : response = self . client . get ( u'/中文/' ) self . assertRedirects ( response , self . redirect_target ) def test_nonascii_redirect ( self ) : response = self . client . get ( '/nonascii_redirect/' ) self . assertRedirects ( response , self . redirect_target ) def test_permanent_nonascii_redirect ( self ) : response = self . client . get ( '/permanent_nonascii_redirect/' ) self . assertRedirects ( response , self . redirect_target , status_code = 301 )

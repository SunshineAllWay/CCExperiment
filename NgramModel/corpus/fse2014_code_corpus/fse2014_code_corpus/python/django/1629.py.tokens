from django . conf import settings from django . db import DEFAULT_DB_ALIAS def pass_test ( * args ) : return def no_backend ( test_func , backend ) : if settings . DATABASES [ DEFAULT_DB_ALIAS ] [ 'ENGINE' ] . rsplit ( '.' ) [ - 1 ] == backend : return pass_test else : return test_func def no_oracle ( func ) : return no_backend ( func , 'oracle' ) def no_postgis ( func ) : return no_backend ( func , 'postgis' ) def no_mysql ( func ) : return no_backend ( func , 'mysql' ) def no_spatialite ( func ) : return no_backend ( func , 'spatialite' ) _default_db = settings . DATABASES [ DEFAULT_DB_ALIAS ] [ 'ENGINE' ] . rsplit ( '.' ) [ - 1 ] oracle = _default_db == 'oracle' postgis = _default_db == 'postgis' mysql = _default_db == 'mysql' spatialite = _default_db == 'spatialite'

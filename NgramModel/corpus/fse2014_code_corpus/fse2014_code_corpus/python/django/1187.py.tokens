import hotshot import os import time from django . core . handlers . modpython import ModPythonHandler PROFILE_DATA_DIR = "/var/log/cmsprofile" def handler ( req ) : profname = "%s.%.3f.prof" % ( req . uri . strip ( "/" ) . replace ( '/' , '.' ) , time . time ( ) ) profname = os . path . join ( PROFILE_DATA_DIR , profname ) prof = hotshot . Profile ( profname ) return prof . runcall ( ModPythonHandler ( ) , req )

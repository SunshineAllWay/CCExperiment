from django . core import management from django . test import TestCase from . models import Article , Book class SampleTestCase ( TestCase ) : fixtures = [ 'fixture1.json' , 'fixture2.json' ] def testClassFixtures ( self ) : self . assertEqual ( Article . objects . count ( ) , 3 ) self . assertQuerysetEqual ( Article . objects . all ( ) , [ , , , ] , lambda a : a . headline ) class FixtureTestCase ( TestCase ) : def test_initial_data ( self ) : self . assertQuerysetEqual ( Book . objects . all ( ) , [ ] , lambda a : a . name ) def test_loaddata ( self ) : management . call_command ( "loaddata" , "fixture1.json" , verbosity = 0 , commit = False ) self . assertQuerysetEqual ( Article . objects . all ( ) , [ , , ] , lambda a : a . headline , ) management . call_command ( "loaddata" , "fixture2.json" , verbosity = 0 , commit = False ) self . assertQuerysetEqual ( Article . objects . all ( ) , [ , , , ] , lambda a : a . headline , ) management . call_command ( "loaddata" , "unknown.json" , verbosity = 0 , commit = False ) self . assertQuerysetEqual ( Article . objects . all ( ) , [ , , , ] , lambda a : a . headline , )

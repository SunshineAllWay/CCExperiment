""" JP-specific Form helpers """ from __future__ import absolute_import from django . contrib . localflavor . jp . jp_prefectures import JP_PREFECTURES from django . forms . fields import RegexField , Select from django . utils . translation import ugettext_lazy as _ class JPPostalCodeField ( RegexField ) : default_error_messages = { : _ ( 'Enter a postal code in the format XXXXXXX or XXX-XXXX.' ) , } def __init__ ( self , max_length = None , min_length = None , * args , ** kwargs ) : super ( JPPostalCodeField , self ) . __init__ ( r'^\d{3}-\d{4}$|^\d{7}$' , max_length , min_length , * args , ** kwargs ) def clean ( self , value ) : v = super ( JPPostalCodeField , self ) . clean ( value ) return v . replace ( '-' , '' ) class JPPrefectureSelect ( Select ) : def __init__ ( self , attrs = None ) : super ( JPPrefectureSelect , self ) . __init__ ( attrs , choices = JP_PREFECTURES )

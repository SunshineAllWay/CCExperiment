""" Classes to represent the definitions of aggregate functions. """ class Aggregate ( object ) : def __init__ ( self , lookup , ** extra ) : self . lookup = lookup self . extra = extra def _default_alias ( self ) : return '%s__%s' % ( self . lookup , self . name . lower ( ) ) default_alias = property ( _default_alias ) def add_to_query ( self , query , alias , col , source , is_summary ) : klass = getattr ( query . aggregates_module , self . name ) aggregate = klass ( col , source = source , is_summary = is_summary , ** self . extra ) query . aggregates [ alias ] = aggregate class Avg ( Aggregate ) : name = 'Avg' class Count ( Aggregate ) : name = 'Count' class Max ( Aggregate ) : name = 'Max' class Min ( Aggregate ) : name = 'Min' class StdDev ( Aggregate ) : name = 'StdDev' class Sum ( Aggregate ) : name = 'Sum' class Variance ( Aggregate ) : name = 'Variance'

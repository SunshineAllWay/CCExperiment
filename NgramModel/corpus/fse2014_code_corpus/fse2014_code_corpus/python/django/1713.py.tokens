""" This module contains functions that generate ctypes prototypes for the GDAL routines. """ from ctypes import c_char_p , c_double , c_int , c_void_p from django . contrib . gis . gdal . prototypes . errcheck import ( check_arg_errcode , check_errcode , check_geom , check_geom_offset , check_pointer , check_srs , check_str_arg , check_string , check_const_string ) class gdal_char_p ( c_char_p ) : pass def double_output ( func , argtypes , errcheck = False , strarg = False ) : func . argtypes = argtypes func . restype = c_double if errcheck : func . errcheck = check_arg_errcode if strarg : func . errcheck = check_str_arg return func def geom_output ( func , argtypes , offset = None ) : func . argtypes = argtypes if not offset : func . restype = c_void_p func . errcheck = check_geom else : func . restype = c_int def geomerrcheck ( result , func , cargs ) : return check_geom_offset ( result , func , cargs , offset ) func . errcheck = geomerrcheck return func def int_output ( func , argtypes ) : func . argtypes = argtypes func . restype = c_int return func def srs_output ( func , argtypes ) : func . argtypes = argtypes func . restype = c_void_p func . errcheck = check_srs return func def const_string_output ( func , argtypes , offset = None ) : func . argtypes = argtypes if offset : func . restype = c_int else : func . restype = c_char_p def _check_const ( result , func , cargs ) : return check_const_string ( result , func , cargs , offset = offset ) func . errcheck = _check_const return func def string_output ( func , argtypes , offset = - 1 , str_result = False ) : func . argtypes = argtypes if str_result : func . restype = gdal_char_p else : func . restype = c_int def _check_str ( result , func , cargs ) : return check_string ( result , func , cargs , offset = offset , str_result = str_result ) func . errcheck = _check_str return func def void_output ( func , argtypes , errcheck = True ) : if argtypes : func . argtypes = argtypes if errcheck : func . restype = c_int func . errcheck = check_errcode else : func . restype = None return func def voidptr_output ( func , argtypes ) : func . argtypes = argtypes func . restype = c_void_p func . errcheck = check_pointer return func

from django . conf import settings from django import http class XViewMiddleware ( object ) : def process_view ( self , request , view_func , view_args , view_kwargs ) : assert hasattr ( request , 'user' ) , ( ) if request . method == 'HEAD' and ( request . META . get ( 'REMOTE_ADDR' ) in settings . INTERNAL_IPS or ( request . user . is_active and request . user . is_staff ) ) : response = http . HttpResponse ( ) response [ 'X-View' ] = "%s.%s" % ( view_func . __module__ , view_func . __name__ ) return response

from random import choice from django . core . management . base import CommandError from django . core . management . templates import TemplateCommand from django . utils . importlib import import_module class Command ( TemplateCommand ) : help = ( "Creates a Django project directory structure for the given " ) def handle ( self , project_name = None , target = None , * args , ** options ) : if project_name is None : raise CommandError ( "you must provide a project name" ) try : import_module ( project_name ) except ImportError : pass else : raise CommandError ( "%r conflicts with the name of an existing " % project_name ) chars = 'abcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*(-_=+)' options [ 'secret_key' ] = '' . join ( [ choice ( chars ) for i in range ( 50 ) ] ) super ( Command , self ) . handle ( 'project' , project_name , target , ** options )

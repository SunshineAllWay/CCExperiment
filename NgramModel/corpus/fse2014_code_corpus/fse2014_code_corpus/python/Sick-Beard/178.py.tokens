""" Functions to display an error (error, warning or information) message. """ from lib . hachoir_core . log import log from lib . hachoir_core . tools import makePrintable import sys , traceback def getBacktrace ( empty = "Empty backtrace." ) : try : info = sys . exc_info ( ) trace = traceback . format_exception ( * info ) sys . exc_clear ( ) if trace [ 0 ] != "None\n" : return "" . join ( trace ) except : return "Error while trying to get backtrace" return empty class HachoirError ( Exception ) : def __init__ ( self , message ) : message_bytes = makePrintable ( message , "ASCII" ) Exception . __init__ ( self , message_bytes ) self . text = message def __unicode__ ( self ) : return self . text HACHOIR_ERRORS = ( HachoirError , LookupError , NameError , AttributeError , TypeError , ValueError , ArithmeticError , RuntimeError ) info = log . info warning = log . warning error = log . error

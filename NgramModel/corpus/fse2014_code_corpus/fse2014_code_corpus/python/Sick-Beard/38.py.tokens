from sickbeard import db from sickbeard . helpers import sanitizeSceneName def addNameToCache ( name , tvdb_id ) : name = sanitizeSceneName ( name ) if not tvdb_id : tvdb_id = 0 cacheDB = db . DBConnection ( 'cache.db' ) cacheDB . action ( "INSERT INTO scene_names (tvdb_id, name) VALUES (?, ?)" , [ tvdb_id , name ] ) def retrieveNameFromCache ( name ) : name = sanitizeSceneName ( name ) cacheDB = db . DBConnection ( 'cache.db' ) cache_results = cacheDB . select ( "SELECT * FROM scene_names WHERE name = ?" , [ name ] ) if not cache_results : return None return int ( cache_results [ 0 ] [ "tvdb_id" ] ) def clearCache ( ) : cacheDB = db . DBConnection ( 'cache.db' ) cacheDB . action ( "DELETE FROM scene_names WHERE tvdb_id = ?" , [ 0 ] )

from sickbeard import db class InitialSchema ( db . SchemaUpgrade ) : def test ( self ) : return self . hasTable ( "lastUpdate" ) def execute ( self ) : queries = [ ( "CREATE TABLE lastUpdate (provider TEXT, time NUMERIC);" , ) , ( "CREATE TABLE db_version (db_version INTEGER);" , ) , ( "INSERT INTO db_version (db_version) VALUES (?)" , 1 ) , ] for query in queries : if len ( query ) == 1 : self . connection . action ( query [ 0 ] ) else : self . connection . action ( query [ 0 ] , query [ 1 : ] ) class AddSceneExceptions ( InitialSchema ) : def test ( self ) : return self . hasTable ( "scene_exceptions" ) def execute ( self ) : self . connection . action ( "CREATE TABLE scene_exceptions (exception_id INTEGER PRIMARY KEY, tvdb_id INTEGER KEY, show_name TEXT)" ) class AddSceneNameCache ( AddSceneExceptions ) : def test ( self ) : return self . hasTable ( "scene_names" ) def execute ( self ) :

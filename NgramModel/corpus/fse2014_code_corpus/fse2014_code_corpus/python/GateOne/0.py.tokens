from distutils . core import setup import sys , os POSIX = 'posix' in sys . builtin_module_names version = '0.9' setup_dir = os . path . dirname ( os . path . abspath ( __file__ ) ) static_dir = os . path . join ( 'gateone' , 'static' ) plugins_dir = os . path . join ( 'gateone' , 'plugins' ) templates_dir = os . path . join ( 'gateone' , 'templates' ) docs_dir = os . path . join ( 'gateone' , 'docs' ) tests_dir = os . path . join ( 'gateone' , 'tests' ) i18n_dir = os . path . join ( 'gateone' , 'i18n' ) combined_js = os . path . join ( static_dir , 'combined_plugins.js' ) with open ( combined_js , 'w' ) as f : f . write ( '// This forces the file to be recreated' ) if POSIX : prefix = '/opt' else : prefix = os . environ [ 'PROGRAMFILES' ] print ( "Gate One will be installed in %s" % prefix ) for arg in sys . argv : if arg . startswith ( '--prefix' ) or arg . startswith ( '--home' ) : prefix = arg . split ( '=' ) [ 1 ] def walk_data_files ( path , install_path = prefix ) : out = [ ] for ( dirpath , dirs , filenames ) in os . walk ( path ) : if ".git" in dirs : del dirs [ dirs . index ( ".git" ) ] thesefiles = [ ] final_path = os . path . join ( install_path , dirpath ) for fname in filenames : file_path = os . path . join ( dirpath , fname ) thesefiles . append ( file_path ) out . append ( ( final_path , thesefiles ) ) return out gateone_files = [ ( os . path . join ( prefix , 'gateone' ) , [ os . path . join ( 'gateone' , 'auth.py' ) , os . path . join ( 'gateone' , 'gateone.py' ) , os . path . join ( 'gateone' , 'logviewer.py' ) , os . path . join ( 'gateone' , 'sso.py' ) , os . path . join ( 'gateone' , 'terminal.py' ) , os . path . join ( 'gateone' , 'termio.py' ) , os . path . join ( 'gateone' , 'utils.py' ) , os . path . join ( 'gateone' , 'authpam.py' ) , os . path . join ( 'gateone' , 'remote_syslog.py' ) , , , ] ) ] static_files = walk_data_files ( static_dir ) template_files = walk_data_files ( templates_dir ) docs_files = walk_data_files ( docs_dir ) plugin_files = walk_data_files ( plugins_dir ) test_files = walk_data_files ( tests_dir ) i18n_files = walk_data_files ( i18n_dir ) data_files = ( gateone_files + static_files + template_files + docs_files + plugin_files + test_files + i18n_files ) setup ( name = 'gateone' , license = 'AGPLv3 or Proprietary' , version = version , description = 'Web-based Terminal Emulator and SSH Client' , long_description = ( ) , classifiers = [ , , , , , , , , , , , ] , keywords = ( ) , url = "http:/liftoffsoftware.com/Products/GateOne" , author = 'Dan McDougall' , author_email = 'daniel.mcdougall@liftoffsoftware.com' , requires = [ "tornado (>=2.2)" ] , provides = [ 'gateone' ] , data_files = data_files ,

from Rpyc import * c = SocketConnection ( "localhost" ) c . execute ( "print 'hello world'" ) import sys c . modules . sys . stdout = sys . stdout c . execute ( "print 'brave new world'" ) c . modules . sys . stdout = c . modules . sys . __stdout__ c . execute ( "x = [1,2,3]" ) print c . namespace . x c . namespace . x . append ( 4 ) c . execute ( "x.append(5)" ) print c . namespace . x print c . execute ( "1+2" ) print c . execute ( "1+2" , "eval" ) c . execute ( """ my_thread_active = True def my_thread_func(callback): import time from Rpyc import Async callback = Async(callback) while my_thread_active: callback(time.time()) time.sleep(1) print "the thread says goodbye" """ ) def callback ( timestamp ) : print "the timestamp is" , timestamp c . modules . thread . start_new_thread ( c . namespace . my_thread_func , ( callback , ) ) c . modules . time . sleep ( 5 ) c . namespace . my_thread_active = False c . close ( )
